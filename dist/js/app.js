"use strict";var viewModel=function(){function a(){var a=new google.maps.StyledMapType([{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#DBD4CE"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}],{name:"Styled Map"});o=new google.maps.Map(document.getElementById("map"),{center:{lat:37.7632006,lng:-122.424911},zoom:14,mapTypeControlOptions:{mapTypeId:"styled_map"}}),o.mapTypes.set("styled_map",a),o.setMapTypeId("styled_map");for(var b=0;b<locations.length;b++)viewModel.makeMarkers(b)}function b(){alert("Sorry, there was a problem loading the google map. Please try again later.")}function c(a){a.setAnimation(google.maps.Animation.BOUNCE),d(a)}function d(a){setTimeout(function(){a.setAnimation(null)},2e3)}function e(a){for(var b=0;b<s().length;b++)s()[b].setMap(a)}function f(a){for(var b=0;b<s().length;b++)s()[b].type===G()&&s()[b].setMap(a)}function g(){e(null)}function h(a){var b=(locations[a].location.lat,locations[a].location.lng,locations[a].location),c=locations[a].title,d=locations[a].type;r=new google.maps.Marker({position:b,title:c,type:d,map:o,animation:google.maps.Animation.DROP}),s.push(r),i(r),m(r)}function i(a){a.addListener("click",function(){c(a),j(a)})}function j(a){void 0==a.venue?(p="https://api.foursquare.com/v2/venues/"+a.id+"?client_id=3GADBQTTZJLISHTNUDHOLMFLZA5X02JZSXVFI1EJPQUJGKO2&client_secret=FQR21B2HNHHE4A5VPNLQHFAFKFQTKUHGSAMFSXGMFCQOXJUV&v=20161005&m=foursquare",$.getJSON(p,function(b){a.venue=b.response.venue,l(a)}).fail(function(a){alert("Sorry, there was a problem loading data for this location. Please try again later."),console.log("Error: "+a)})):l(a)}function k(a){E(!1),j(a),c(a)}function l(a){t(a.venue.name),B(a.venue.categories[0].name),v(a.venue.location.address),u(a.venue.contact.formattedPhone),A(a.venue.price?a.venue.price.message:""),C(a.venue.hours?a.venue.hours.status:""),w(a.venue.url),x(a.venue.rating),z(a.venue.tips.groups[0].items[0].text),F(a.venue.photos.groups[0].items[1].prefix+"width500"+a.venue.photos.groups[0].items[1].suffix),H(""),D("https://foursquare.com/v/"+a.id+"?ref=3GADBQTTZJLISHTNUDHOLMFLZA5X02JZSXVFI1EJPQUJGKO2")}function m(a){q="https://api.foursquare.com/v2/venues/search?client_id=3GADBQTTZJLISHTNUDHOLMFLZA5X02JZSXVFI1EJPQUJGKO2&client_secret=FQR21B2HNHHE4A5VPNLQHFAFKFQTKUHGSAMFSXGMFCQOXJUV&ll=37.761024,-122.421779&query="+a.title+"&v=20161005&m=foursquare",$.getJSON(q,function(b){for(var c=0;c<s().length;c++)a.title===s()[c].title&&(s()[c].id=b.response.venues[0].id)}).fail(function(a){alert("Sorry, there was a problem loading the markers. Please try again later."),console.log("Error: "+a)})}function n(){E(!E())}var o,p,q,r,s=ko.observableArray(),t=ko.observable(),u=ko.observable(),v=ko.observable(),w=ko.observable(),x=ko.observable(),y=ko.observable(),z=ko.observable(),A=ko.observable(),B=ko.observable(),C=ko.observable(),D=ko.observable(),E=ko.observable(!1),F=ko.observable("./img/Mission-dolores-basilica.jpg"),G=ko.observable(),H=ko.observable("The Mission District - named for the Mission Dolores founded in 1776 - is San Franciscoâ€™s oldest neighborhood. Home to a vibrant hispanic community, it boasts the largest concentration of murals in the city. Valencia street is the epicentre of gentrification, with hot new restaurants, boutiques, and cafe's rubbing shoulders with local favorites that have stood the test of time."),I=ko.observableArray(["All Types of Places","Points of Interest","Historical Places","Cafe's and Bakeries","Art Galleries","Book Stores","Music and Movies","Restaurants and Bars"]),J=ko.computed(function(){return"All Types of Places"===G()?(e(o),s()):(g(),f(o),ko.utils.arrayFilter(s(),function(a){return a.type===G()}))});return{dropDown:I,selectedOption:G,makeMarkers:h,markers:s,fourSquareDataLoad:j,marker:r,newList:J,rightBoxName:t,rightBoxPhone:u,rightBoxAddress:v,rightBoxUrl:w,rightBoxPhotoUrl:y,rightBoxTips:z,rightBoxPrice:A,rightBoxCategory:B,rightBoxHours:C,rightBoxRating:x,photoUrl:F,defaultIntro:H,initMap:a,dataDisplay:l,listViewDisplay:k,attributionLink:D,toggle:n,toggleOpen:E,mapError:b}}();ko.applyBindings(viewModel);