"use strict";var viewModel=function(){function a(a){a.setAnimation(google.maps.Animation.BOUNCE),b(a)}function b(a){setTimeout(function(){a.setAnimation(null)},2e3)}function c(a){for(var b=0;b<r().length;b++)r()[b].setMap(a)}function d(a){for(var b=0;b<r().length;b++)r()[b].type===F()&&r()[b].setMap(a)}function e(){c(null)}function f(a){var b=(locations[a].location.lat,locations[a].location.lng,locations[a].location),c=locations[a].title,d=locations[a].type;p=new google.maps.Marker({position:b,title:c,type:d,map:m,animation:google.maps.Animation.DROP}),r.push(p),g(p),k(p)}function g(b){b.addListener("click",function(){a(b),h(b)})}function h(a){void 0==a.venue?(n="https://api.foursquare.com/v2/venues/"+a.id+"?client_id=3GADBQTTZJLISHTNUDHOLMFLZA5X02JZSXVFI1EJPQUJGKO2&client_secret=FQR21B2HNHHE4A5VPNLQHFAFKFQTKUHGSAMFSXGMFCQOXJUV&v=20161005&m=foursquare",$.getJSON(n,function(b){a.venue=b.response.venue,j(a)})):j(a)}function i(b){q=0,D(!1),h(b),a(b)}function j(a){s(a.venue.name),A(a.venue.categories[0].name),u(a.venue.location.address),t(a.venue.contact.formattedPhone),z(a.venue.price?a.venue.price.message:""),B(a.venue.hours?a.venue.hours.status:""),v(a.venue.url),w(a.venue.rating),y(a.venue.tips.groups[0].items[0].text),E(a.venue.photos.groups[0].items[1].prefix+"width500"+a.venue.photos.groups[0].items[1].suffix),G(""),C("https://foursquare.com/v/"+a.id+"?ref=3GADBQTTZJLISHTNUDHOLMFLZA5X02JZSXVFI1EJPQUJGKO2")}function k(a){o="https://api.foursquare.com/v2/venues/search?client_id=3GADBQTTZJLISHTNUDHOLMFLZA5X02JZSXVFI1EJPQUJGKO2&client_secret=FQR21B2HNHHE4A5VPNLQHFAFKFQTKUHGSAMFSXGMFCQOXJUV&ll=37.761024,-122.421779&query="+a.title+"&v=20161005&m=foursquare",$.getJSON(o,function(b){for(var c=0;c<r().length;c++)a.title===r()[c].title&&(r()[c].id=b.response.venues[0].id)})}function l(){++q,D(q%2?!0:!1)}var m,n,o,p,q=0,r=ko.observableArray(),s=ko.observable(),t=ko.observable(),u=ko.observable(),v=ko.observable(),w=ko.observable(),x=ko.observable(),y=ko.observable(),z=ko.observable(),A=ko.observable(),B=ko.observable(),C=ko.observable(),D=ko.observable(!1),E=ko.observable("./img/Mission-dolores-basilica.jpg"),F=ko.observable(),G=ko.observable("The Mission District - named for the Mission Dolores founded in 1776 - is San Franciscoâ€™s oldest neighborhood. Home to a vibrant hispanic community, it boasts the largest concentration of murals in the city. Valencia street is the epicentre of gentrification, with hot new restaurants, boutiques, and cafe's rubbing shoulders with local favorites that have stood the test of time."),H=ko.observableArray(["All Types of Places","Points of Interest","Historical Places","Cafe's and Bakeries","Art Galleries","Book Stores","Music and Movies","Restaurants and Bars"]),I=function(){var a=new google.maps.StyledMapType([{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#DBD4CE"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}],{name:"Styled Map"});m=new google.maps.Map(document.getElementById("map"),{center:{lat:37.7632006,lng:-122.424911},zoom:14,mapTypeControlOptions:{mapTypeId:"styled_map"}}),m.mapTypes.set("styled_map",a),m.setMapTypeId("styled_map");for(var b=0;b<locations.length;b++)viewModel.makeMarkers(b)},J=ko.computed(function(){return"All Types of Places"===F()?(c(m),r()):(e(),d(m),ko.utils.arrayFilter(r(),function(a){return a.type===F()}))});return $(document).ajaxError(function(a,b,c){alert("Sorry, there was a problem. Please try again later."),console.log("Error: "+errorThrown)}),{dropDown:H,selectedOption:F,makeMarkers:f,markers:r,fourSquareDataLoad:h,marker:p,newList:J,rightBoxName:s,rightBoxPhone:t,rightBoxAddress:u,rightBoxUrl:v,rightBoxPhotoUrl:x,rightBoxTips:y,rightBoxPrice:z,rightBoxCategory:A,rightBoxHours:B,rightBoxRating:w,photoUrl:E,defaultIntro:G,initMap:I,dataDisplay:j,listViewDisplay:i,attributionLink:C,toggle:l,toggleOpen:D}}();ko.applyBindings(viewModel);